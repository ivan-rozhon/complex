<div flex="100">
    <h4 class="input-header" ng-if="$ctrl.schemaName">{{ $ctrl.schemaName }}</h4>
</div>

<div flex="100" ng-if="$ctrl.schemaKey !== 'options'">
    <md-button class="md-icon-button" aria-label="Data" ng-click="$ctrl.doLoadData()">
        <md-icon md-colors="$ctrl.schema.data ? {} : {color: 'red'}" md-font-icon="material-icons">storage</md-icon>
        <md-tooltip>Data</md-tooltip>
    </md-button>
    <md-button class="md-icon-button" aria-label="Data" ng-click="$ctrl.schema.data = ''" ng-show="$ctrl.schema.data">
        <md-icon md-font-icon="material-icons">clear</md-icon>
        <md-tooltip>Clear Data</md-tooltip>
    </md-button>
    <md-button ng-if="$ctrl.index !== 0 && $ctrl.schemaKey !== 'webSections'" class="md-icon-button" aria-label="Up" ng-click="$ctrl.doMoveItem(true)">
        <md-icon md-font-icon="material-icons">arrow_drop_up</md-icon>
        <md-tooltip>Up</md-tooltip>
    </md-button>
    <md-button ng-if="!$ctrl.lastIndex && $ctrl.schemaKey !== 'webSections'" class="md-icon-button" aria-label="Down" ng-click="$ctrl.doMoveItem(false)">
        <md-icon md-font-icon="material-icons">arrow_drop_down</md-icon>
        <md-tooltip>Down</md-tooltip>
    </md-button>
    <md-button ng-if="!($ctrl.schemaKey === $ctrl.schemaMainKey && $ctrl.lastIndex && $ctrl.index === 0) && $ctrl.schemaKey !== 'webSections'"
        class="md-icon-button" aria-label="Delete" ng-click="$ctrl.doDeleteItem()">
        <md-icon md-font-icon="material-icons">delete</md-icon>
        <md-tooltip>Delete</md-tooltip>
    </md-button>
</div>

<div ng-repeat="(key, value) in $ctrl.schema" ng-switch="$ctrl.inputData(key)['type']" ng-class="$ctrl.inputData(key)['type']">
    <npc-schema-input class="container" layout="row" layout-wrap ng-switch-when="container"
        schema-index="$index"
        schema-last-index="$last"
        schema-key="key"
        schema-main-key="$ctrl.schemaMainKey"
        schema-value="value"
        schema-name="''"
        schema-config="$ctrl.schemaConfig"
        deep-level="$ctrl.deepLevel + 1"
        add-item="$ctrl.addSchemaItem(deepLevel, key, index)"
        add-sub-item="$ctrl.addSchemaSubItem(deepLevel, key, index)"
        delete-item="$ctrl.deleteSchemaItem(key, index)"
        move-item="$ctrl.moveSchemaItem(direction, key, index)"
        save-schema="$ctrl.saveSchema()"></npc-schema-input>

    <npc-schema-input layout="row" layout-wrap ng-switch-when="sub" ng-repeat="schema in value"
        schema-index="$index"
        schema-last-index="$last"
        schema-main-key="$ctrl.schemaMainKey"
        schema-value="schema"
        schema-name="schema.name"
        schema-config="$ctrl.schemaConfig"
        deep-level="$ctrl.deepLevel + 1"
        add-item="$ctrl.addSchemaItem(deepLevel, key, index)"
        add-sub-item="$ctrl.addSchemaSubItem(deepLevel, key, index)"
        delete-item="$ctrl.deleteSchemaItem(key, index)"
        move-item="$ctrl.moveSchemaItem(direction, key, index)"
        save-schema="$ctrl.saveSchema()"></npc-schema-input>

    <npc-schema-input-model ng-switch-default
        input-data="$ctrl.inputData(key)"
        is-item="$ctrl.schemaKey === 'webSections' ? true : false"
        input-model="$ctrl.schema[key]"
        output-model="$ctrl.onSelectChange(inputModel)"></npc-schema-input-model>
</div>

<div flex="100" ng-if="$ctrl.schemaKey !== 'options' && $ctrl.schemaKey !== 'webSections'">
    <md-button class="md-icon-button" aria-label="Add" ng-click="$ctrl.doAddItem()">
        <md-icon md-font-icon="material-icons">add_box</md-icon>
        <md-tooltip>Add</md-tooltip>
    </md-button>
    <md-button class="md-icon-button" aria-label="Sub add"
        ng-if="$ctrl.schema.sub && !$ctrl.schema.sub.length > 0" ng-click="$ctrl.doAddSubItem()">
        <md-icon md-font-icon="material-icons">library_add</md-icon>
        <md-tooltip>Add child</md-tooltip>
    </md-button>
</div>